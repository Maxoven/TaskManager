{"ast":null,"code":"import _objectSpread from\"/Users/maksimvakulenko/Desktop/LUT/DataIntensive/TaskManager/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{uploadFile,getTaskAttachments,downloadFile,deleteFile}from'../services/api';import'./TaskModal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TaskModal(_ref){let{task,members,onSave,onDelete,onClose,allTasks,onAttachmentsChange}=_ref;const[formData,setFormData]=useState({title:'',description:'',startDate:'',endDate:'',assigneeIds:[],dependencies:[]});const[attachments,setAttachments]=useState([]);const[uploadingFile,setUploadingFile]=useState(false);const[loadingAttachments,setLoadingAttachments]=useState(false);useEffect(()=>{if(task){var _task$assignees,_task$dependencies;setFormData({title:task.title||'',description:task.description||'',startDate:task.start_date||'',endDate:task.end_date||'',assigneeIds:((_task$assignees=task.assignees)===null||_task$assignees===void 0?void 0:_task$assignees.map(a=>a.id))||[],dependencies:((_task$dependencies=task.dependencies)===null||_task$dependencies===void 0?void 0:_task$dependencies.map(d=>({depends_on_task_id:d.depends_on_task_id,dependency_type:d.dependency_type||'finish_to_start'})))||[]});// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞—á–∏\nloadAttachments();}},[task]);const loadAttachments=async()=>{if(!task||!task.id)return;setLoadingAttachments(true);try{const response=await getTaskAttachments(task.id);setAttachments(response.data||[]);}catch(error){console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤:',error);}finally{setLoadingAttachments(false);}};const handleSubmit=e=>{e.preventDefault();onSave(formData);};const handleAssigneeToggle=userId=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{assigneeIds:prev.assigneeIds.includes(userId)?prev.assigneeIds.filter(id=>id!==userId):[...prev.assigneeIds,userId]}));};const handleAddDependency=()=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{dependencies:[...prev.dependencies,{depends_on_task_id:'',dependency_type:'finish_to_start'}]}));};const handleRemoveDependency=index=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{dependencies:prev.dependencies.filter((_,i)=>i!==index)}));};const handleDependencyChange=(index,field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{dependencies:prev.dependencies.map((dep,i)=>i===index?_objectSpread(_objectSpread({},dep),{},{[field]:parseInt(value)||value}):dep)}));};const handleFileUpload=async e=>{const file=e.target.files[0];if(!file||!task||!task.id)return;// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (10MB)\nif(file.size>10*1024*1024){alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB');return;}setUploadingFile(true);try{await uploadFile(task.id,file);await loadAttachments();if(onAttachmentsChange){onAttachmentsChange();// –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ\n}e.target.value='';// –°–±—Ä–∞—Å—ã–≤–∞–µ–º input\n}catch(error){var _error$response,_error$response$data;alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞');console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:',error);}finally{setUploadingFile(false);}};const handleFileDownload=async(fileId,fileName)=>{try{const response=await downloadFile(task.id,fileId);// –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è\nconst url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',fileName);document.body.appendChild(link);link.click();link.remove();window.URL.revokeObjectURL(url);}catch(error){alert('–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞');console.error('–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞:',error);}};const handleFileDelete=async(fileId,fileName)=>{if(!window.confirm(\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B \\\"\".concat(fileName,\"\\\"?\")))return;try{await deleteFile(task.id,fileId);await loadAttachments();if(onAttachmentsChange){onAttachmentsChange();// –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ\n}}catch(error){alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞');console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞:',error);}};const formatFileSize=bytes=>{if(bytes<1024)return bytes+' B';if(bytes<1024*1024)return(bytes/1024).toFixed(1)+' KB';return(bytes/(1024*1024)).toFixed(1)+' MB';};// –§–∏–ª—å—Ç—Ä—É–µ–º –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–≤—è–∑–µ–π (–∏—Å–∫–ª—é—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É)\nconst availableTasksForDependency=(allTasks===null||allTasks===void 0?void 0:allTasks.filter(t=>t.id!==(task===null||task===void 0?void 0:task.id)))||[];return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal task-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:task?'–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É':'–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"close-btn\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.title,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value})),required:true,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value})),placeholder:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438\",rows:\"4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.startDate,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{startDate:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.endDate,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{endDate:e.target.value})),min:formData.startDate})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u0441\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{className:\"assignees-select\",children:members.map(member=>/*#__PURE__*/_jsxs(\"label\",{className:\"assignee-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.assigneeIds.includes(member.id),onChange:()=>handleAssigneeToggle(member.id)}),/*#__PURE__*/_jsx(\"span\",{children:member.name})]},member.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dependency-header\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0421\\u0432\\u044F\\u0437\\u0438 \\u0441 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddDependency,className:\"btn-add-dependency\",disabled:availableTasksForDependency.length===0,children:\"+ \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0432\\u044F\\u0437\\u044C\"})]}),formData.dependencies.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-dependencies\",children:\"\\u041D\\u0435\\u0442 \\u0441\\u0432\\u044F\\u0437\\u0435\\u0439 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u0438\\u043C\\u0438 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0430\\u043C\\u0438\"}):/*#__PURE__*/_jsx(\"div\",{className:\"dependencies-list\",children:formData.dependencies.map((dep,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"dependency-item\",children:[/*#__PURE__*/_jsxs(\"select\",{value:dep.depends_on_task_id,onChange:e=>handleDependencyChange(index,'depends_on_task_id',e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0443\"}),availableTasksForDependency.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.title},t.id))]}),/*#__PURE__*/_jsxs(\"select\",{value:dep.dependency_type,onChange:e=>handleDependencyChange(index,'dependency_type',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"finish_to_start\",children:\"\\u041E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u0435 \\u2192 \\u041D\\u0430\\u0447\\u0430\\u043B\\u043E\"}),/*#__PURE__*/_jsx(\"option\",{value:\"start_to_start\",children:\"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043E \\u2192 \\u041D\\u0430\\u0447\\u0430\\u043B\\u043E\"}),/*#__PURE__*/_jsx(\"option\",{value:\"finish_to_finish\",children:\"\\u041E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u0435 \\u2192 \\u041E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"option\",{value:\"start_to_finish\",children:\"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043E \\u2192 \\u041E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u0435\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemoveDependency(index),className:\"btn-remove-dependency\",children:\"\\xD7\"})]},index))}),/*#__PURE__*/_jsx(\"p\",{className:\"dependency-hint\",children:\"\\uD83D\\uDCA1 \\u0421\\u0432\\u044F\\u0437\\u0438 \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u044F\\u044E\\u0442 \\u043F\\u043E\\u0440\\u044F\\u0434\\u043E\\u043A \\u0432\\u044B\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u044F \\u0437\\u0430\\u0434\\u0430\\u0447 \\u043D\\u0430 \\u0434\\u0438\\u0430\\u0433\\u0440\\u0430\\u043C\\u043C\\u0435 \\u0413\\u0430\\u043D\\u0442\\u0430\"})]}),task&&task.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"attachments-header\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0424\\u0430\\u0439\\u043B\\u044B\"}),/*#__PURE__*/_jsx(\"label\",{className:\"btn-upload-file\",htmlFor:\"file-upload\",children:uploadingFile?'‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...':'üìé –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª'}),/*#__PURE__*/_jsx(\"input\",{id:\"file-upload\",type:\"file\",onChange:handleFileUpload,disabled:uploadingFile,style:{display:'none'},accept:\".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar\"})]}),loadingAttachments?/*#__PURE__*/_jsx(\"p\",{className:\"attachments-loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432...\"}):attachments.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-attachments\",children:\"\\u041D\\u0435\\u0442 \\u043F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432\"}):/*#__PURE__*/_jsx(\"div\",{className:\"attachments-list\",children:attachments.map(file=>/*#__PURE__*/_jsxs(\"div\",{className:\"attachment-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"attachment-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"attachment-icon\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"attachment-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"attachment-name\",children:file.original_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"attachment-meta\",children:[formatFileSize(file.file_size),\" \\xB7 \",new Date(file.uploaded_at).toLocaleDateString('ru-RU')]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"attachment-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleFileDownload(file.id,file.original_name),className:\"btn-download-file\",title:\"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\",children:\"\\u2B07\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleFileDelete(file.id,file.original_name),className:\"btn-delete-file\",title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]},file.id))}),/*#__PURE__*/_jsx(\"p\",{className:\"attachments-hint\",children:\"\\uD83D\\uDCA1 \\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0440\\u0430\\u0437\\u043C\\u0435\\u0440 \\u0444\\u0430\\u0439\\u043B\\u0430: 10MB. \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u043C\\u044B\\u0435 \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u044B: jpg, png, pdf, doc, docx, xls, xlsx, txt, zip, rar\"})]}),!task&&/*#__PURE__*/_jsx(\"p\",{className:\"create-task-hint\",children:\"\\uD83D\\uDCA1 \\u0424\\u0430\\u0439\\u043B\\u044B \\u043C\\u043E\\u0436\\u043D\\u043E \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0441\\u043B\\u0435 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[onDelete&&task&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onDelete(task.id),className:\"btn-danger\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions-right\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn-secondary\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:task?'–°–æ—Ö—Ä–∞–Ω–∏—Ç—å':'–°–æ–∑–¥–∞—Ç—å'})]})]})]})]})});}export default TaskModal;","map":{"version":3,"names":["React","useState","useEffect","uploadFile","getTaskAttachments","downloadFile","deleteFile","jsx","_jsx","jsxs","_jsxs","TaskModal","_ref","task","members","onSave","onDelete","onClose","allTasks","onAttachmentsChange","formData","setFormData","title","description","startDate","endDate","assigneeIds","dependencies","attachments","setAttachments","uploadingFile","setUploadingFile","loadingAttachments","setLoadingAttachments","_task$assignees","_task$dependencies","start_date","end_date","assignees","map","a","id","d","depends_on_task_id","dependency_type","loadAttachments","response","data","error","console","handleSubmit","e","preventDefault","handleAssigneeToggle","userId","prev","_objectSpread","includes","filter","handleAddDependency","handleRemoveDependency","index","_","i","handleDependencyChange","field","value","dep","parseInt","handleFileUpload","file","target","files","size","alert","_error$response","_error$response$data","handleFileDownload","fileId","fileName","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","remove","revokeObjectURL","handleFileDelete","confirm","concat","formatFileSize","bytes","toFixed","availableTasksForDependency","t","className","onClick","children","stopPropagation","onSubmit","type","onChange","required","placeholder","rows","min","member","checked","name","disabled","length","htmlFor","style","display","accept","original_name","file_size","Date","uploaded_at","toLocaleDateString"],"sources":["/Users/maksimvakulenko/Desktop/LUT/DataIntensive/TaskManager/frontend/src/components/TaskModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { uploadFile, getTaskAttachments, downloadFile, deleteFile } from '../services/api';\nimport './TaskModal.css';\n\nfunction TaskModal({ task, members, onSave, onDelete, onClose, allTasks, onAttachmentsChange }) {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    startDate: '',\n    endDate: '',\n    assigneeIds: [],\n    dependencies: []\n  });\n  const [attachments, setAttachments] = useState([]);\n  const [uploadingFile, setUploadingFile] = useState(false);\n  const [loadingAttachments, setLoadingAttachments] = useState(false);\n\n  useEffect(() => {\n    if (task) {\n      setFormData({\n        title: task.title || '',\n        description: task.description || '',\n        startDate: task.start_date || '',\n        endDate: task.end_date || '',\n        assigneeIds: task.assignees?.map(a => a.id) || [],\n        dependencies: task.dependencies?.map(d => ({\n          depends_on_task_id: d.depends_on_task_id,\n          dependency_type: d.dependency_type || 'finish_to_start'\n        })) || []\n      });\n      \n      // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞—á–∏\n      loadAttachments();\n    }\n  }, [task]);\n\n  const loadAttachments = async () => {\n    if (!task || !task.id) return;\n    \n    setLoadingAttachments(true);\n    try {\n      const response = await getTaskAttachments(task.id);\n      setAttachments(response.data || []);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤:', error);\n    } finally {\n      setLoadingAttachments(false);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSave(formData);\n  };\n\n  const handleAssigneeToggle = (userId) => {\n    setFormData(prev => ({\n      ...prev,\n      assigneeIds: prev.assigneeIds.includes(userId)\n        ? prev.assigneeIds.filter(id => id !== userId)\n        : [...prev.assigneeIds, userId]\n    }));\n  };\n\n  const handleAddDependency = () => {\n    setFormData(prev => ({\n      ...prev,\n      dependencies: [...prev.dependencies, { depends_on_task_id: '', dependency_type: 'finish_to_start' }]\n    }));\n  };\n\n  const handleRemoveDependency = (index) => {\n    setFormData(prev => ({\n      ...prev,\n      dependencies: prev.dependencies.filter((_, i) => i !== index)\n    }));\n  };\n\n  const handleDependencyChange = (index, field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      dependencies: prev.dependencies.map((dep, i) => \n        i === index ? { ...dep, [field]: parseInt(value) || value } : dep\n      )\n    }));\n  };\n\n  const handleFileUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file || !task || !task.id) return;\n\n    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB');\n      return;\n    }\n\n    setUploadingFile(true);\n    try {\n      await uploadFile(task.id, file);\n      await loadAttachments();\n      if (onAttachmentsChange) {\n        onAttachmentsChange(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ\n      }\n      e.target.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º input\n    } catch (error) {\n      alert(error.response?.data?.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞');\n      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:', error);\n    } finally {\n      setUploadingFile(false);\n    }\n  };\n\n  const handleFileDownload = async (fileId, fileName) => {\n    try {\n      const response = await downloadFile(task.id, fileId);\n      \n      // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      alert('–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞');\n      console.error('–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞:', error);\n    }\n  };\n\n  const handleFileDelete = async (fileId, fileName) => {\n    if (!window.confirm(`–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª \"${fileName}\"?`)) return;\n\n    try {\n      await deleteFile(task.id, fileId);\n      await loadAttachments();\n      if (onAttachmentsChange) {\n        onAttachmentsChange(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ\n      }\n    } catch (error) {\n      alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞');\n      console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞:', error);\n    }\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes < 1024) return bytes + ' B';\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n  };\n\n  // –§–∏–ª—å—Ç—Ä—É–µ–º –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–≤—è–∑–µ–π (–∏—Å–∫–ª—é—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É)\n  const availableTasksForDependency = allTasks?.filter(t => t.id !== task?.id) || [];\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal task-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>{task ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É' : '–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É'}</h2>\n          <button onClick={onClose} className=\"close-btn\">√ó</button>\n        </div>\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *</label>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              required\n              placeholder=\"–ù–∞–∑–≤–∞–Ω–∏–µ\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>\n            <textarea\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              placeholder=\"–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏\"\n              rows=\"4\"\n            />\n          </div>\n\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>\n              <input\n                type=\"date\"\n                value={formData.startDate}\n                onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>\n              <input\n                type=\"date\"\n                value={formData.endDate}\n                onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\n                min={formData.startDate}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</label>\n            <div className=\"assignees-select\">\n              {members.map(member => (\n                <label key={member.id} className=\"assignee-checkbox\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.assigneeIds.includes(member.id)}\n                    onChange={() => handleAssigneeToggle(member.id)}\n                  />\n                  <span>{member.name}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <div className=\"dependency-header\">\n              <label>–°–≤—è–∑–∏ —Å –∑–∞–¥–∞—á–∞–º–∏</label>\n              <button \n                type=\"button\" \n                onClick={handleAddDependency}\n                className=\"btn-add-dependency\"\n                disabled={availableTasksForDependency.length === 0}\n              >\n                + –î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å\n              </button>\n            </div>\n            \n            {formData.dependencies.length === 0 ? (\n              <p className=\"no-dependencies\">–ù–µ—Ç —Å–≤—è–∑–µ–π —Å –¥—Ä—É–≥–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏</p>\n            ) : (\n              <div className=\"dependencies-list\">\n                {formData.dependencies.map((dep, index) => (\n                  <div key={index} className=\"dependency-item\">\n                    <select\n                      value={dep.depends_on_task_id}\n                      onChange={(e) => handleDependencyChange(index, 'depends_on_task_id', e.target.value)}\n                      required\n                    >\n                      <option value=\"\">–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É</option>\n                      {availableTasksForDependency.map(t => (\n                        <option key={t.id} value={t.id}>{t.title}</option>\n                      ))}\n                    </select>\n                    \n                    <select\n                      value={dep.dependency_type}\n                      onChange={(e) => handleDependencyChange(index, 'dependency_type', e.target.value)}\n                    >\n                      <option value=\"finish_to_start\">–û–∫–æ–Ω—á–∞–Ω–∏–µ ‚Üí –ù–∞—á–∞–ª–æ</option>\n                      <option value=\"start_to_start\">–ù–∞—á–∞–ª–æ ‚Üí –ù–∞—á–∞–ª–æ</option>\n                      <option value=\"finish_to_finish\">–û–∫–æ–Ω—á–∞–Ω–∏–µ ‚Üí –û–∫–æ–Ω—á–∞–Ω–∏–µ</option>\n                      <option value=\"start_to_finish\">–ù–∞—á–∞–ª–æ ‚Üí –û–∫–æ–Ω—á–∞–Ω–∏–µ</option>\n                    </select>\n                    \n                    <button\n                      type=\"button\"\n                      onClick={() => handleRemoveDependency(index)}\n                      className=\"btn-remove-dependency\"\n                    >\n                      √ó\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n            <p className=\"dependency-hint\">\n              üí° –°–≤—è–∑–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ –ì–∞–Ω—Ç–∞\n            </p>\n          </div>\n\n          {/* –°–µ–∫—Ü–∏—è —Ñ–∞–π–ª–æ–≤ - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á */}\n          {task && task.id && (\n            <div className=\"form-group\">\n              <div className=\"attachments-header\">\n                <label>–§–∞–π–ª—ã</label>\n                <label className=\"btn-upload-file\" htmlFor=\"file-upload\">\n                  {uploadingFile ? '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...' : 'üìé –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª'}\n                </label>\n                <input\n                  id=\"file-upload\"\n                  type=\"file\"\n                  onChange={handleFileUpload}\n                  disabled={uploadingFile}\n                  style={{ display: 'none' }}\n                  accept=\".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar\"\n                />\n              </div>\n\n              {loadingAttachments ? (\n                <p className=\"attachments-loading\">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤...</p>\n              ) : attachments.length === 0 ? (\n                <p className=\"no-attachments\">–ù–µ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤</p>\n              ) : (\n                <div className=\"attachments-list\">\n                  {attachments.map(file => (\n                    <div key={file.id} className=\"attachment-item\">\n                      <div className=\"attachment-info\">\n                        <span className=\"attachment-icon\">üìÑ</span>\n                        <div className=\"attachment-details\">\n                          <div className=\"attachment-name\">{file.original_name}</div>\n                          <div className=\"attachment-meta\">\n                            {formatFileSize(file.file_size)} ¬∑ {new Date(file.uploaded_at).toLocaleDateString('ru-RU')}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"attachment-actions\">\n                        <button\n                          type=\"button\"\n                          onClick={() => handleFileDownload(file.id, file.original_name)}\n                          className=\"btn-download-file\"\n                          title=\"–°–∫–∞—á–∞—Ç—å\"\n                        >\n                          ‚¨áÔ∏è\n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => handleFileDelete(file.id, file.original_name)}\n                          className=\"btn-delete-file\"\n                          title=\"–£–¥–∞–ª–∏—Ç—å\"\n                        >\n                          üóëÔ∏è\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n              \n              <p className=\"attachments-hint\">\n                üí° –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: jpg, png, pdf, doc, docx, xls, xlsx, txt, zip, rar\n              </p>\n            </div>\n          )}\n\n          {!task && (\n            <p className=\"create-task-hint\">\n              üí° –§–∞–π–ª—ã –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏\n            </p>\n          )}\n\n          <div className=\"modal-actions\">\n            {onDelete && task && (\n              <button \n                type=\"button\" \n                onClick={() => onDelete(task.id)} \n                className=\"btn-danger\"\n              >\n                –£–¥–∞–ª–∏—Ç—å\n              </button>\n            )}\n            <div className=\"modal-actions-right\">\n              <button type=\"button\" onClick={onClose} className=\"btn-secondary\">\n                –û—Ç–º–µ–Ω–∞\n              </button>\n              <button type=\"submit\" className=\"btn-primary\">\n                {task ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' : '–°–æ–∑–¥–∞—Ç—å'}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default TaskModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}